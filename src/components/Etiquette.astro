---
// src/components/Etiquette.astro
import QRCode from './QRCode.astro';
import Accordion from './Accordion.astro';

const { entry } = Astro.props;
const { data: fm } = entry; // Avec les collections, les métadonnées sont dans .data

// Rendu du contenu Markdown
const { Content } = await entry.render();

const formatRaw = String(fm.format ?? '1').replace('/', '_').replace('.', '_');
const formatClass = `format-${formatRaw}`;

const contenus = Array.isArray(fm.contenus) ? fm.contenus : [];
const erreurs = Array.isArray(fm.erreurs_frequentes) ? fm.erreurs_frequentes : [];
const accordions = Array.isArray(fm.accordeons) ? fm.accordeons : [];
const liens = Array.isArray(fm.liens) ? fm.liens : [];
---

<article class={`etiquette ${formatClass}`} id={fm.id}>
  <header class="etiquette-header">
    <h2 class="etiquette-title">{fm.title ?? 'Étiquette'}</h2>
    <div class="etiquette-meta">
       </div>
  </header>

  {Content ? (
    <section class="etiquette-section section-texte">
      <Content />
    </section>
  ) : null}

  </article>