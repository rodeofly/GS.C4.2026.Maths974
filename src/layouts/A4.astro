---
import BasePrintLayout from './BasePrintLayout.astro';
import printA4StylesUrl from '../styles/print-A4.css?url';

const { info, niveau, theme, sousTheme } = Astro.props;
const fm = info?.data ?? info?.frontmatter ?? {};

// LOGIQUE CORRIGÉE :
// 1. Si le fichier a un "sous_theme" explicite, on le prend.
// 2. Sinon, on prend le paramètre d'URL "sousTheme".
// 3. Sinon, on prend le titre du fichier.
const title = fm.sous_theme ?? sousTheme ?? fm.title ?? 'Sans titre';

// Idem pour le thème
const themeLabel = fm.theme ?? theme ?? 'Général';
const niveauLabel = fm.niveau ?? niveau ?? '';
---

<BasePrintLayout
  info={info}
  title={title}
  layoutClass="layout-a4"
  cssUrl={printA4StylesUrl}
  niveauLabel={niveauLabel}
  themeLabel={themeLabel}
>
  <slot />
  <slot name="footer" slot="footer" />
</BasePrintLayout>